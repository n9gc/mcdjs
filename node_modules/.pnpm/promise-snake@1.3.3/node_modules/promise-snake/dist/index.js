"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
(() => {
    const pro = (t) => t && 'then' in t && typeof t?.then === 'function' ? t : Promise.resolve();
    Promise.prototype.next = Promise.next = function (executor) {
        return pro(this).then(() => new Promise(executor));
    };
    Promise.prototype.snake = Promise.snake = function (executors) {
        let promise = pro(this);
        executors.forEach(executor => promise = promise.next(executor));
        return promise;
    };
    Promise.prototype.thens = Promise.thens = function (onfulfilleds) {
        let promise = pro(this);
        onfulfilleds.forEach(onfulfilled => promise = promise.then(onfulfilled));
        return promise;
    };
    Array.prototype.forEachAsync = async function (callbackfn, thisArg) {
        typeof thisArg !== 'undefined' && (callbackfn = callbackfn.bind(thisArg));
        await Promise.thens(this.map((...args) => () => callbackfn(...args), thisArg));
    };
    Array.prototype.mapAsync = async function (callbackfn, thisArg) {
        typeof thisArg !== 'undefined' && (callbackfn = callbackfn.bind(thisArg));
        const rslt = [];
        await Promise.thens(this.map((...args) => async () => rslt.push(await callbackfn(...args)), thisArg));
        return rslt;
    };
})();
//# sourceMappingURL=index.js.map